!function(){"use strict";class t{constructor(t,e){let{data:s,handleCardClick:i}=t;this._name=s.name,this._link=s.link,this._cardTemplateSelector=e,this._handleCardClick=i}_getTemplate(){return document.querySelector(this._cardTemplateSelector).content.firstElementChild.cloneNode(!0)}_fillCardData(){this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._handleLikeButton())),this._deleteButton.addEventListener("click",(()=>this._handleDeleteButton())),this._cardImage.addEventListener("click",(()=>this._handleCardClick({name:this._name,link:this._link})))}_handleLikeButton(){this._likeButton.classList.toggle("card__like-button_active")}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=this._getTemplate(),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._cardImage=this._cardElement.querySelector(".card__image"),this._fillCardData(),this._setEventListeners(),this._cardElement}}class e{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=e,this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector)}_showInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent=""}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_hasInvalidInput(){return this._inputList.some((t=>!t.validity.valid))}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_toggleButtonState(){this._hasInvalidInput()?this._disableButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_setEventListeners(){this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}resetForm(){this._toggleButtonState(),this._inputList.forEach((t=>{this._hideInputError(t)}))}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}}class s{constructor(t){let{modalSelector:e}=t;this._modalElement=document.querySelector(e),this._handleEscDown=this._handleEscClose.bind(this)}open(){this._modalElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscDown)}close(){this._modalElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscDown)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._modalElement.closest(".modal").addEventListener("click",(t=>{(t.target.classList.contains("modal")||t.target.classList.contains("modal__close"))&&this.close()}))}}const i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class n extends s{constructor(t){let{modalSelector:e,handleFormSubmit:s}=t;super({modalSelector:e}),this._modalForm=this._modalElement.querySelector(i.formSelector),this._handleFormSubmit=s,this._submitButton=this._modalElement.querySelector(i.submitButtonSelector),this._inputList=this._modalElement.querySelectorAll(i.inputSelector)}_getInputValues(){const t={};return this._inputList.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._submitButton.addEventListener("click",(t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}close(){this._modalForm.reset(),super.close()}}const r=document.forms["edit-profile-form"],o=document.querySelector("#profile-edit-button"),a=document.forms["add-card-form"],l=document.querySelector("#add-card-button"),d=document.querySelector("#edit-profile-title"),c=document.querySelector("#edit-profile-description"),m=new e(i,r),u=new e(i,a),h=new class extends s{constructor(t){super({modalSelector:t}),this._image=this._modalElement.querySelector(".modal__image"),this._imageCaption=this._modalElement.querySelector(".modal__image-caption")}open(t){this._imageCaption.textContent=t.name,this._image.src=t.link,this._image.alt=t.name,super.open()}}("#preview-image-modal"),_=e=>{const s=new t({data:e,handleCardClick:t=>{h.open(t)}},"#card-template");f.addItem(s.getView())};m.enableValidation(),u.enableValidation();const p=new class{constructor(t){let{userName:e,userDescription:s}=t;this._name=document.querySelector(e),this._description=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,description:this._description.textContent}}setUserInfo(t,e){this._name.textContent=t,this._description.textContent=e}}({userName:"#profile-title",userDescription:"#prof-description"}),f=new class{constructor(t,e){let{items:s,renderer:i}=t;this._renderer=i,this._renderedItems=s,this._container=document.querySelector(e)}renderItems(){this._renderedItems.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}}({items:[{name:"Amalfi, Italy",link:"https://images.unsplash.com/photo-1612698093158-e07ac200d44e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80"},{name:"Tokyo, Japan",link:"https://images.unsplash.com/photo-1503899036084-c55cdd92da26?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80"},{name:"Dublin, Ireland",link:"https://images.unsplash.com/photo-1564959130747-897fb406b9af?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80"},{name:"New York City",link:"https://images.unsplash.com/photo-1490644658840-3f2e3f8c5625?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80"},{name:"San Francisco",link:"https://images.unsplash.com/photo-1526404423292-15db8c2334e5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=735&q=80"},{name:"Minneapolis",link:"https://images.unsplash.com/photo-1535082049017-5a7b43f3bcef?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8bWlubmVzb3RhfGVufDB8fDB8fHww&auto=format&fit=crop&w=500&q=60"}],renderer:_},".cards__list"),b=new n({modalSelector:"#profile-edit-modal",handleFormSubmit:t=>{p.setUserInfo(t.name,t.description),b.close()}}),E=new n({modalSelector:"#add-card-modal",handleFormSubmit:t=>{_(t),E.close()}});h.setEventListeners(),b.setEventListeners(),E.setEventListeners(),f.renderItems(),o.addEventListener("click",(()=>{const t=p.getUserInfo();d.value=t.name,c.value=t.description,m.resetForm(),b.open()})),l.addEventListener("click",(()=>{u.resetForm(),E.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL01vZGFsLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybU1vZGFsLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9JbWFnZU1vZGFsLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrIH0sIGNhcmRUZW1wbGF0ZVNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yID0gY2FyZFRlbXBsYXRlU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHJldHVybiBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFRlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBfZmlsbENhcmREYXRhKCkge1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpKTtcblxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbigpXG4gICAgKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSlcbiAgICApO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VCdXR0b24oKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXG4gICAgKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG5cbiAgICB0aGlzLl9maWxsQ2FyZERhdGEoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX2Rpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICByZXNldEZvcm0oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWwge1xuICBjb25zdHJ1Y3Rvcih7IG1vZGFsU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX21vZGFsRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobW9kYWxTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjRG93biA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIC8vb3BlbnMgbW9kYWxcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NEb3duKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIC8vY2xvc2VzIG1vZGFsXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjRG93bik7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgLy9saXN0ZW5zIGZvciBlc2MgYnV0dG9uXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvL2xpc3RlbnMgZm9yIGV2ZW50c1xuICAgIHRoaXMuX21vZGFsRWxlbWVudC5jbG9zZXN0KFwiLm1vZGFsXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikgfHxcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIkFtYWxmaSwgSXRhbHlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjEyNjk4MDkzMTU4LWUwN2FjMjAwZDQ0ZT9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz0xMTcwJnE9ODBcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVG9reW8sIEphcGFuXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUwMzg5OTAzNjA4NC1jNTVjZGQ5MmRhMjY/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Njg3JnE9ODBcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiRHVibGluLCBJcmVsYW5kXCIsXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU2NDk1OTEzMDc0Ny04OTdmYjQwNmI5YWY/aXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEJmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Njg3JnE9ODBcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTmV3IFlvcmsgQ2l0eVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0OTA2NDQ2NTg4NDAtM2YyZTNmOGM1NjI1P2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTY4NyZxPTgwXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlNhbiBGcmFuY2lzY29cIixcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTI2NDA0NDIzMjkyLTE1ZGI4YzIzMzRlNT9peGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0QmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz03MzUmcT04MFwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNaW5uZWFwb2xpc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MzUwODIwNDkwMTctNWE3YjQzZjNiY2VmP2l4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4elpXRnlZMmg4TW54OGJXbHVibVZ6YjNSaGZHVnVmREI4ZkRCOGZId3cmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz01MDAmcT02MFwiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcbiAgY2FyZHNMaXN0OiBcIi5jYXJkc19fbGlzdFwiLFxuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgcHJldmlld0ltYWdlTW9kYWw6IFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIixcbiAgZWRpdEZvcm1Nb2RhbDogXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIGFkZENhcmRNb2RhbDogXCIjYWRkLWNhcmQtbW9kYWxcIixcbiAgcHJvZmlsZVRpdGxlOiBcIiNwcm9maWxlLXRpdGxlXCIsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbjogXCIjcHJvZi1kZXNjcmlwdGlvblwiLFxuICBwcm9maWxlRWRpdE5hbWU6IFwiI2VkaXQtcHJvZmlsZS10aXRsZVwiLFxuICBwcm9maWxlRWRpdERlc2NyaXB0aW9uOiBcIiNlZGl0LXByb2ZpbGUtZGVzY3JpcHRpb25cIixcbiAgZm9ybU1vZGFsQ29udGFpbmVyOiBcIi5tb2RhbF9fY29udGFpbmVyXCIsXG4gIGltYWdlTW9kYWxDb250YWluZXI6IFwiLm1vZGFsX19jb250YWluZXItaW1hZ2VcIixcbn07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uT3B0aW9ucyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuIiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0aW9uT3B0aW9ucyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBjb25zdHJ1Y3Rvcih7IG1vZGFsU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHsgbW9kYWxTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9tb2RhbEZvcm0gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHZhbGlkYXRpb25PcHRpb25zLmZvcm1TZWxlY3RvclxuICAgICk7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB2YWxpZGF0aW9uT3B0aW9ucy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG4gICAgICB2YWxpZGF0aW9uT3B0aW9ucy5pbnB1dFNlbGVjdG9yXG4gICAgKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dHMgPSB7fTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXRzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaW5wdXRzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fbW9kYWxGb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCBcIi4uL2ltYWdlcy9qYWNxdWVzLWNvdXN0ZWF1LnBuZ1wiO1xuXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgSW1hZ2VNb2RhbCBmcm9tIFwiLi4vY29tcG9uZW50cy9JbWFnZU1vZGFsLmpzXCI7XG5pbXBvcnQgRm9ybU1vZGFsIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1Nb2RhbC5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQge1xuICBpbml0aWFsQ2FyZHMsXG4gIHZhbGlkYXRpb25PcHRpb25zLFxuICBzZWxlY3RvcnMsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LXByb2ZpbGUtZm9ybVwiXTtcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuY29uc3QgYWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImFkZC1jYXJkLWZvcm1cIl07XG5jb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1idXR0b25cIik7XG5cbmNvbnN0IHByb2ZpbGVFZGl0VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS10aXRsZVwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0RGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNlZGl0LXByb2ZpbGUtZGVzY3JpcHRpb25cIlxuKTtcblxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uT3B0aW9ucywgcHJvZmlsZUVkaXRGb3JtKTtcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbk9wdGlvbnMsIGFkZENhcmRGb3JtKTtcblxuY29uc3QgaW1hZ2VNb2RhbCA9IG5ldyBJbWFnZU1vZGFsKHNlbGVjdG9ycy5wcmV2aWV3SW1hZ2VNb2RhbCk7XG5cbmNvbnN0IHJlbmRlckNhcmQgPSAoZGF0YSkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAge1xuICAgICAgZGF0YSxcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKGRhdGEpID0+IHtcbiAgICAgICAgaW1hZ2VNb2RhbC5vcGVuKGRhdGEpO1xuICAgICAgfSxcbiAgICB9LFxuICAgIHNlbGVjdG9ycy5jYXJkVGVtcGxhdGVcbiAgKTtcblxuICBjYXJkTGlzdC5hZGRJdGVtKGNhcmQuZ2V0VmlldygpKTtcbn07XG5cbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICB1c2VyTmFtZTogc2VsZWN0b3JzLnByb2ZpbGVUaXRsZSxcbiAgdXNlckRlc2NyaXB0aW9uOiBzZWxlY3RvcnMucHJvZmlsZURlc2NyaXB0aW9uLFxufSk7XG5cbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxuICB9LFxuICBzZWxlY3RvcnMuY2FyZHNMaXN0XG4pO1xuXG5jb25zdCB1c2VySW5mb01vZGFsID0gbmV3IEZvcm1Nb2RhbCh7XG4gIG1vZGFsU2VsZWN0b3I6IHNlbGVjdG9ycy5lZGl0Rm9ybU1vZGFsLFxuICBoYW5kbGVGb3JtU3VibWl0OiAodmFsdWVzKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odmFsdWVzLm5hbWUsIHZhbHVlcy5kZXNjcmlwdGlvbik7XG5cbiAgICB1c2VySW5mb01vZGFsLmNsb3NlKCk7XG4gIH0sXG59KTtcblxuY29uc3QgbmV3Q2FyZE1vZGFsID0gbmV3IEZvcm1Nb2RhbCh7XG4gIG1vZGFsU2VsZWN0b3I6IHNlbGVjdG9ycy5hZGRDYXJkTW9kYWwsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgcmVuZGVyQ2FyZChkYXRhKTtcblxuICAgIG5ld0NhcmRNb2RhbC5jbG9zZSgpO1xuICB9LFxufSk7XG5cbmltYWdlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnVzZXJJbmZvTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbm5ld0NhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCBwcm9maWxlSW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG5cbiAgcHJvZmlsZUVkaXRUaXRsZS52YWx1ZSA9IHByb2ZpbGVJbmZvLm5hbWU7XG4gIHByb2ZpbGVFZGl0RGVzY3JpcHRpb24udmFsdWUgPSBwcm9maWxlSW5mby5kZXNjcmlwdGlvbjtcblxuICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldEZvcm0oKTtcbiAgdXNlckluZm9Nb2RhbC5vcGVuKCk7XG59KTtcblxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRDYXJkRm9ybVZhbGlkYXRvci5yZXNldEZvcm0oKTtcbiAgbmV3Q2FyZE1vZGFsLm9wZW4oKTtcbn0pO1xuIiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEltYWdlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IG1vZGFsU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5faW1hZ2VDYXB0aW9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9faW1hZ2UtY2FwdGlvblwiXG4gICAgKTtcbiAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIHRoaXMuX2ltYWdlQ2FwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lLCB1c2VyRGVzY3JpcHRpb24gfSkge1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lKTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckRlc2NyaXB0aW9uKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbikge1xuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRUZW1wbGF0ZVNlbGVjdG9yIiwiZGF0YSIsImhhbmRsZUNhcmRDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2xvbmVOb2RlIiwiX2ZpbGxDYXJkRGF0YSIsIl9jYXJkVGl0bGUiLCJ0ZXh0Q29udGVudCIsIl9jYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9kZWxldGVCdXR0b24iLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiZ2V0VmlldyIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJfZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsInJlc2V0Rm9ybSIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIk1vZGFsIiwibW9kYWxTZWxlY3RvciIsIl9tb2RhbEVsZW1lbnQiLCJfaGFuZGxlRXNjRG93biIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjbG9zZXN0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJ2YWxpZGF0aW9uT3B0aW9ucyIsImZvcm1TZWxlY3RvciIsIkZvcm1Nb2RhbCIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9tb2RhbEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0cyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsInByb2ZpbGVFZGl0Rm9ybSIsImZvcm1zIiwicHJvZmlsZUVkaXRCdXR0b24iLCJhZGRDYXJkRm9ybSIsImFkZENhcmRCdXR0b24iLCJwcm9maWxlRWRpdFRpdGxlIiwicHJvZmlsZUVkaXREZXNjcmlwdGlvbiIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJpbWFnZU1vZGFsIiwiX2ltYWdlIiwiX2ltYWdlQ2FwdGlvbiIsInJlbmRlckNhcmQiLCJjYXJkIiwiY2FyZExpc3QiLCJhZGRJdGVtIiwidXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJEZXNjcmlwdGlvbiIsIl9kZXNjcmlwdGlvbiIsImdldFVzZXJJbmZvIiwiZGVzY3JpcHRpb24iLCJzZXRVc2VySW5mbyIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwidXNlckluZm9Nb2RhbCIsInZhbHVlcyIsIm5ld0NhcmRNb2RhbCIsInByb2ZpbGVJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==